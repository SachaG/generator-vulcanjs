{"version":3,"sources":["../src/lib/VulcanGenerator.js"],"names":["chalk","require","path","Generator","dashify","Redux","logger","reducers","common","store","errors","camelCase","module","exports","VulcanGenerator","constructor","args","options","allConfig","config","getAll","process","env","NODE_ENV","createStore","applyMiddleware","_registerCommonArguments","_registerArguments","beautify","bind","option","type","String","required","alias","desc","descriptions","packageName","moduleName","_commitStore","storeKeys","Object","keys","getState","forEach","key","set","_dispatch","action","dispatch","_isPackageExists","filteredPackageName","_filterPackageName","packages","_isModuleExists","filteredModuleName","_filterModuleName","modules","_packageHasNonZeroModules","thePackage","_getPackage","moduleNames","length","_getReactExtension","reactExtension","_getPackageNames","packageNames","sort","alphabeticalSort","_getModuleNames","_getStoryBookSetupStatus","storyBook","setupStatus","_canPrompt","_hasNoErrors","_canWrite","_canConfigure","_canInstall","errorKeys","_logAllErrors","errorsArr","map","errorKey","error","index","errorNo","message","_assertIsVulcan","isVulcan","notVulcan","_assertIsNotVulcan","_assertIsPackageExists","notPackageExists","green","_assertNotPackageExists","isPackageExists","_assertModuleIsExists","notModuleExists","_assertModuleNotExists","isModuleExists","_assertHasNonZeroPackages","isZeroPackages","_assertPackageHasNonZeroModules","isZeroModules","_filterAppName","appName","_end","_getPath","relativeToProjectRootPath","join","absolutePath","destinationPath","relativeTo","relative","isAbsolute","_getRootStoriesPath","_getPackagePath","props","_getLibPath","_getModulesPath","_getModulePath","_getComponentsPath","_getPackageStoriesPath","_getClientPath","_getServerPath","_getPackageNameInputQuestion","name","messages","when","inputProps","default","packagename","_getPackageNameListQuestion","choices","getDefaultChoiceIndex","_getModuleNameInputQuestion","_getModuleNameListQuestion","_getIsPackageAutoAddQuestion","isPackageAutoAdd","_getComponentNameQuestion","componentName","_getComponentTypeQuestion","componentType","value","_getIsRegisterComponentQuestion","isRegisterComponent","isRegister","_getStoryBookSetupQuestion","storyBookSetupStatus","allowedStatuses","pending","installing","askagain","isStatusAllowsSetupQuestion","_getIsAddComponentToStoryBookQuestion","isAddComponentToStoryBook"],"mappings":"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","file":"VulcanGenerator.js","sourcesContent":["const chalk = require('chalk');\nconst path = require('path');\nconst Generator = require('yeoman-generator');\nconst dashify = require('dashify');\nconst Redux = require('redux');\nconst logger = require('redux-node-logger');\nconst reducers = require('./reducers');\nconst common = require('./common');\n\nlet store;\nconst errors = {};\nconst camelCase = require('camelcase');\n\nmodule.exports = class VulcanGenerator extends Generator {\n  constructor (args, options) {\n    super(args, options);\n    if (!store) {\n      const allConfig = this.config.getAll();\n      if (process.env.NODE_ENV === 'development') {\n        store = Redux.createStore(\n          reducers,\n          allConfig,\n          Redux.applyMiddleware(logger())\n        );\n      } else {\n        store = Redux.createStore(\n          reducers,\n          allConfig\n        );\n      }\n    }\n    this._registerCommonArguments();\n    this._registerArguments();\n    common.beautify.bind(this)();\n  }\n\n  _registerArguments () {}\n\n  _registerCommonArguments () {\n    this.option(\n      'packagename',\n      {\n        type: String,\n        required: false,\n        alias: 'p',\n        desc: common.descriptions.packageName,\n      }\n    );\n    this.option(\n      'modulename',\n      {\n        type: String,\n        required: false,\n        alias: 'm',\n        desc: common.descriptions.moduleName,\n      }\n    );\n  }\n\n  /*\n    State management\n  */\n\n  _commitStore () {\n    const storeKeys = Object.keys(store.getState());\n    storeKeys.forEach((key) => {\n      this.config.set(key, store.getState()[key]);\n    });\n  }\n\n  _dispatch (action) {\n    return store.dispatch(action);\n  }\n\n\n  /*\n    State access helpers\n  */\n\n  _isPackageExists (packageName) {\n    const filteredPackageName = this._filterPackageName(packageName);\n    return !!store.getState().packages[filteredPackageName];\n  }\n\n  _isModuleExists (packageName, moduleName) {\n    const filteredModuleName = this._filterModuleName(moduleName);\n    return (this._isPackageExists(packageName)) &&\n    !!store.getState().packages[packageName].modules[filteredModuleName];\n  }\n\n  _packageHasNonZeroModules (packageName) {\n    if (!this._isPackageExists(packageName)) return false;\n    const thePackage = this._getPackage(packageName);\n    const moduleNames = Object.keys(thePackage.modules);\n    return moduleNames.length > 0;\n  }\n\n  _getReactExtension () {\n    return store.getState().reactExtension;\n  }\n\n  _getPackageNames () {\n    const packages = store.getState().packages;\n    const packageNames = Object.keys(packages);\n    return packageNames.sort(common.alphabeticalSort);\n  }\n\n  _getModuleNames (packageName) {\n    const thePackage = this._getPackage(packageName);\n    const modules = this._isPackageExists(packageName) ?\n      thePackage.modules :\n      {};\n    const moduleNames = Object.keys(modules);\n    return moduleNames.sort(common.alphabeticalSort);\n  }\n\n  _getPackage (packageName) {\n    return store.getState().packages[packageName];\n  }\n\n  _getStoryBookSetupStatus () {\n    return store.getState().storyBook.setupStatus;\n  }\n\n  /*\n    Helpers that determine whether a task can be performed\n  */\n\n  _canPrompt () {\n    return this._hasNoErrors();\n  }\n\n  _canWrite () {\n    return this._hasNoErrors();\n  }\n\n  _canConfigure () {\n    return this._hasNoErrors();\n  }\n\n  _canInstall () {\n    return this._hasNoErrors();\n  }\n\n\n  /*\n    Error management\n  */\n\n  _hasNoErrors () {\n    const errorKeys = Object.keys(errors);\n    return errorKeys.length === 0;\n  }\n\n  _logAllErrors () {\n    const errorKeys = Object.keys(errors);\n    const errorsArr = errorKeys.map(errorKey => errors[errorKey]);\n    errorsArr.forEach((error, index) => {\n      const errorNo = `Error (${index}):`;\n      const message = `${errorNo} \\n\\n ${error.message}`;\n      this.env.error(message);\n    });\n  }\n\n  _assertIsVulcan () {\n    if (!store.getState().isVulcan) {\n      errors.notVulcan = {\n        message: 'This is not a Vulcan.js project directory. \\nYou cannot run Vulcan.js generators outside of a Vulcan.js project directory.',\n      };\n    }\n  }\n\n  _assertIsNotVulcan () {\n    if (store.getState().isVulcan) {\n      errors.isVulcan = {\n        message: 'You are already in a Vulcan.js project directory. \\nYou may not run this command inside a Vulcan.js project directory.',\n      };\n    }\n  }\n\n  _assertIsPackageExists (packageName) {\n    if (!this._isPackageExists(packageName)) {\n      errors.notPackageExists = {\n        message: `The package ${packageName} does not exist. \\nIf you'd like to work on this package, you should create it first by running: ${chalk.green(`vulcanjs:package ${packageName}`)}`,\n      };\n    }\n  }\n\n  _assertNotPackageExists (packageName) {\n    if (this._isPackageExists(packageName)) {\n      errors.isPackageExists = {\n        message: `A package with the name: '${packageName}' already exists. \\nIf you'd like to overwrite this package, you should first run ${chalk.green(`vulcanjs:remove package --p ${packageName}`)}.`,\n      };\n    }\n  }\n\n  _assertModuleIsExists (packageName, moduleName) {\n    if (!this._isModuleExists(packageName, moduleName)) {\n      errors.notModuleExists = {\n        message: `A module with the name: '${moduleName}' under the package '${packageName}' does not exists. \\nIf you'd like to work on this module, you should first run ${chalk.green(`vulcanjs:module --p ${packageName} --m ${moduleName}`)}.`,\n      };\n    }\n  }\n\n  _assertModuleNotExists (packageName, moduleName) {\n    if (this._isModuleExists(packageName, moduleName)) {\n      errors.isModuleExists = {\n        message: `A module with the name: '${moduleName}' under the package '${packageName}' already exists. \\nIf you'd like to overwrite this module, you should first run ${chalk.green(`vulcanjs:remove module --p ${packageName} --m ${moduleName}`)}.`,\n      };\n    }\n  }\n\n  _assertHasNonZeroPackages () {\n    const packages = store.getState().packages;\n    if (Object.keys(packages).length < 1) {\n      errors.isZeroPackages = {\n        message: `The command you just ran requires at least 1 custom package to be present in your app. \\nTo create a package, run ${chalk.green('vulcanjs:package')}`,\n      };\n    }\n  }\n\n  _assertPackageHasNonZeroModules (packageName) {\n    this._assertIsPackageExists(packageName);\n    if (!this._packageHasNonZeroModules(packageName)) {\n      errors.isZeroModules = {\n        message: `The command you just ran requires at least 1 module to be present in the package: '${packageName}'. \\nTo create a module in ${packageName}, run ${chalk.green(`vulcanjs:module --p ${packageName}`)}`,\n      };\n    }\n  }\n\n  /*\n    Common string filters\n  */\n\n  _filterPackageName (packageName) {\n    return dashify(packageName);\n  }\n\n  _filterAppName (appName) {\n    return dashify(appName);\n  }\n\n  _filterModuleName (moduleName) {\n    return camelCase(moduleName);\n  }\n\n  _end () {\n    this._logAllErrors();\n  }\n\n\n  /*\n    Destination paths\n  */\n\n  _getPath (options, ...args) {\n    const relativeToProjectRootPath = path.join(...args);\n    const absolutePath = this.destinationPath(relativeToProjectRootPath);\n    if (options.relativeTo) return path.relative(options.relativeTo, absolutePath);\n    return options.isAbsolute ? absolutePath : relativeToProjectRootPath;\n  }\n\n  _getRootStoriesPath (options, ...args) {\n    return this._getPath(\n      options,\n      '.stories',\n      ...args\n    );\n  }\n\n  _getPackagePath (options, ...args) {\n    return this._getPath(\n      options,\n      'packages',\n      this.props.packageName,\n      ...args\n    );\n  }\n\n  _getLibPath (options, ...args) {\n    return this._getPackagePath(\n      options,\n      'lib',\n      ...args\n    );\n  }\n\n  _getModulesPath (options, ...args) {\n    return this._getLibPath(\n      options,\n      'modules',\n      ...args\n    );\n  }\n\n  _getModulePath (options, ...args) {\n    return this._getModulesPath(\n      options,\n      this.props.moduleName,\n      ...args\n    );\n  }\n\n  _getComponentsPath (options, ...args) {\n    return this._getLibPath(\n      options,\n      'components',\n      ...args\n    );\n  }\n\n  _getPackageStoriesPath (options, ...args) {\n    return this._getComponentsPath(\n      options,\n      'stories.js',\n      ...args\n    );\n  }\n\n  _getClientPath (options, ...args) {\n    return this._getLibPath(\n      options,\n      'client',\n      ...args\n    );\n  }\n\n  _getServerPath (options, ...args) {\n    return this._getLibPath(\n      options,\n      'server',\n      ...args\n    );\n  }\n\n  /*\n    Common Questions\n  */\n\n  _getPackageNameInputQuestion () {\n    return {\n      type: 'input',\n      name: 'packageName',\n      message: common.messages.packageName,\n      when: () => (!this.inputProps.packageName),\n      default: this.options.packagename,\n    };\n  }\n\n  _getPackageNameListQuestion () {\n    return {\n      type: 'list',\n      name: 'packageName',\n      message: common.messages.packageName,\n      when: () => (!this.inputProps.packageName),\n      choices: this._getPackageNames(),\n      default: common.getDefaultChoiceIndex(\n        this._getPackageNames(),\n        this.options.packagename\n      ),\n    };\n  }\n\n  _getModuleNameInputQuestion () {\n    return {\n      type: 'input',\n      name: 'moduleName',\n      message: common.messages.moduleName,\n      when: () => (!this.inputProps.moduleName),\n      default: this.options.moduleName,\n    };\n  }\n\n  _getModuleNameListQuestion () {\n    return {\n      type: 'list',\n      name: 'moduleName',\n      message: common.messages.moduleName,\n      when: () => (!this.inputProps.packageName),\n      choices: this._getModuleNames(this.props.packageName),\n      default: common.getDefaultChoiceIndex(\n        this._getModuleNames(this.props.packageName),\n        this.options.moduleName\n      ),\n    };\n  }\n\n  _getIsPackageAutoAddQuestion () {\n    return {\n      type: 'confirm',\n      name: 'isPackageAutoAdd',\n      message: common.messages.isPackageAutoAdd,\n      when: () => (!this.inputProps.packageName),\n    };\n  }\n\n  _getComponentNameQuestion () {\n    return {\n      type: 'input',\n      name: 'componentName',\n      message: 'Component name',\n      when: () => (!this.inputProps.componentName),\n    };\n  }\n\n  _getComponentTypeQuestion () {\n    return {\n      type: 'list',\n      name: 'componentType',\n      message: common.messages.componentType,\n      choices: [\n        { name: 'Pure Function', value: 'pure' },\n        { name: 'Class Component', value: 'class' },\n      ],\n      when: () => (!this.inputProps.componentType),\n    };\n  }\n\n  _getIsRegisterComponentQuestion () {\n    return {\n      type: 'confirm',\n      name: 'isRegister',\n      message: common.messages.isRegisterComponent,\n      when: () => (!this.inputProps.isRegister),\n    };\n  }\n\n  _getStoryBookSetupQuestion () {\n    return {\n      type: 'list',\n      name: 'storyBookSetupStatus',\n      message: common.messages.storyBookSetupStatus,\n      choices: [\n        { name: 'Yes, take me to storybook setup after this.', value: 'installing' },\n        { name: 'No, ask later.', value: 'pending' },\n        { name: 'No, and dont ask again.', value: 'dontask' },\n      ],\n      when: () => {\n        const storyBookSetupStatus = this._getStoryBookSetupStatus();\n        const allowedStatuses = {\n          pending: true,\n          installing: true,\n          askagain: true,\n        };\n        const isStatusAllowsSetupQuestion = allowedStatuses[storyBookSetupStatus];\n        return (!this.inputProps.packageName && isStatusAllowsSetupQuestion);\n      },\n    };\n  }\n\n  _getIsAddComponentToStoryBookQuestion () {\n    return {\n      type: 'confirm',\n      name: 'isAddComponentToStoryBook',\n      message: common.messages.isAddComponentToStoryBook,\n      when: () => (!this.inputProps.isAddComponentToStoryBook),\n    };\n  }\n};\n"]}