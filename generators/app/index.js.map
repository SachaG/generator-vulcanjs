{"version":3,"sources":["../../src/generators/app/index.js"],"names":["chalk","require","common","VulcanGenerator","module","exports","_registerArguments","option","type","String","required","alias","desc","descriptions","appName","reactExtension","packageManager","initializing","_assertIsNotVulcan","inputProps","prompting","_canPrompt","questions","name","message","messages","when","default","options","appname","choices","reactExtensions","getDefaultChoiceIndex","reactextension","packageManagers","packagemanager","prompt","then","answers","props","appSubPath","_filterPackageName","configuring","_canConfigure","destinationRoot","destinationPath","_dispatch","_commitStore","install","_canInstall","log","green","spawnCommandSync","installDependencies","npm","bower","yarn","end","_end","_hasNoErrors"],"mappings":"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","file":"index.js","sourcesContent":["const chalk = require('chalk');\nconst common = require('../../lib/common');\nconst VulcanGenerator = require('../../lib/VulcanGenerator');\n\nmodule.exports = class extends VulcanGenerator {\n  _registerArguments () {\n    this.option(\n      'appname',\n      {\n        type: String,\n        required: false,\n        alias: 'n',\n        desc: common.descriptions.appName,\n      }\n    );\n    this.option(\n      'reactextension',\n      {\n        type: String,\n        required: false,\n        alias: 'rx',\n        desc: common.descriptions.reactExtension,\n      }\n    );\n    this.option(\n      'packagemanager',\n      {\n        type: String,\n        required: false,\n        alias: 'pm',\n        desc: common.descriptions.packageManager,\n      }\n    );\n  }\n\n  initializing () {\n    this._assertIsNotVulcan();\n    this.inputProps = {};\n  }\n\n  prompting () {\n    if (!this._canPrompt()) { return false; }\n    const questions = [\n      {\n        type: 'input',\n        name: 'appName',\n        message: common.messages.appName,\n        when: () => (!this.inputProps.appName),\n        default: this.options.appname,\n      },\n      {\n        type: 'list',\n        name: 'reactExtension',\n        message: common.messages.reactExtension,\n        choices: common.reactExtensions,\n        when: () => (!this.inputProps.reactExtension),\n        default: common.getDefaultChoiceIndex(\n          common.reactExtensions,\n          this.options.reactextension\n        ),\n      },\n      {\n        type: 'list',\n        name: 'packageManager',\n        message: common.messages.packageManager,\n        choices: common.packageManagers,\n        when: () => (!this.inputProps.packageManager),\n        default: common.getDefaultChoiceIndex(\n          common.packageManagers,\n          this.options.packagemanager\n        ),\n      },\n    ];\n\n    return this.prompt(questions).then((answers) => {\n      const appName = this.inputProps.appName || answers.appName;\n      this.props = {\n        appName,\n        reactExtension: (\n          this.inputProps.reactExtension ||\n          answers.reactExtension\n        ),\n        appSubPath: this._filterPackageName(appName),\n        packageManager: this.inputProps.packageManager || answers.packageManager,\n      };\n    });\n  }\n\n  configuring () {\n    if (!this._canConfigure()) { return; }\n    this.destinationRoot(\n      this.destinationPath(this.props.appSubPath)\n    );\n    this._dispatch({\n      type: 'SET_IS_VULCAN',\n    });\n    this._dispatch({\n      type: 'SET_APP_NAME',\n      appName: this.props.appName,\n    });\n    this._dispatch({\n      type: 'SET_REACT_EXTENSION',\n      reactExtension: this.props.reactExtension,\n    });\n    this._dispatch({\n      type: 'SET_PACKAGE_MANAGER',\n      packageManager: this.props.packageManager,\n    });\n    this._commitStore();\n  }\n\n  install () {\n    if (!this._canInstall()) { return; }\n    this.log(chalk.green('\\nPulling the most up to date git repository... \\n'));\n    this.spawnCommandSync('git', [\n      'init',\n    ]);\n    this.spawnCommandSync('git', [\n      'remote',\n      'add',\n      'origin',\n      'git@github.com:VulcanJS/Vulcan.git',\n    ]);\n    this.spawnCommandSync('git', [\n      'pull',\n      'origin',\n      'master',\n    ]);\n    this.spawnCommandSync('git', [\n      'remote',\n      'rm',\n      'origin',\n    ]);\n    this.installDependencies({\n      npm: this.props.packageManager === 'npm',\n      bower: false,\n      yarn: this.props.packageManager === 'yarn',\n    });\n  }\n\n  end () {\n    this._end();\n    if (!this._hasNoErrors()) { return; }\n    this.log(' ');\n    this.log(chalk.green('Successfully generated vulcan code base. \\n'));\n    this.log(chalk.green('To run your new app: \\n'));\n    this.log(chalk.green(`  cd ${this.props.appSubPath}`));\n    this.log(chalk.green(`  ${this.props.packageManager} start \\n`));\n  }\n};\n"]}